<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script src="lib/matter.min.js"></script>

    <script>
        const Example = {};

        Example.sprites = function () {


            function boll(name, x, y){
                return Bodies.circle(x, y, 98/2, {
                        density: 0.0005,
                        frictionAir: 0.06,
                        restitution: 0.3,
                        friction: 0.01,
                        render: {
                            sprite: {
                                texture: `./dearfriends/${name}.png`
                            }
                        }
                    });
            }


            const width = 800
            const height = 1200

            const Engine = Matter.Engine,
                Render = Matter.Render,
                Runner = Matter.Runner,
                Composites = Matter.Composites,
                Common = Matter.Common,
                MouseConstraint = Matter.MouseConstraint,
                Mouse = Matter.Mouse,
                Composite = Matter.Composite,
                Bodies = Matter.Bodies;
           
            const engine = Engine.create(),
                  world = engine.world;

            const render = Render.create({
                element: document.body,
                engine: engine,
                options: {
                    width: width,
                    height: height,
                    showAngleIndicator: false,
                    wireframes: false
                }
            });

            Render.run(render);

            const runner = Runner.create();
            Runner.run(runner, engine);

            // add bodies
            const thickness = 30
            const options = {isStatic: true};

            world.bodies = [];

            // De fasta vÃ¤ggarna
            
            Composite.add(world, [
                
            // x, y, width, height
                Bodies.rectangle(width/2, 0, width, thickness, options), 
                Bodies.rectangle(width/2, height, width, thickness, options), 

                Bodies.rectangle(0, height/2, thickness, height, options), 
                Bodies.rectangle(width, height/2, thickness, height, options), 
            ]);

            // x, y, kolumner, rader, gap, gap, callback
            const stack = Composites.stack(0, 0, 5, 4, 0, 0, function (x, y) {
                if (Common.random() > 0.35) {
                    return boll('nils', x, y)
                } else {
                    return boll('oscar', x, y)
                }
            });

            Composite.add(world, stack);

            // add mouse control
            var mouse = Mouse.create(render.canvas),
                mouseConstraint = MouseConstraint.create(engine, {
                    mouse: mouse,
                    constraint: {
                        stiffness: 0.2,
                        render: {
                            visible: false
                        }
                    }
                });

            Composite.add(world, mouseConstraint);

            // keep the mouse in sync with rendering
            render.mouse = mouse;

            // fit the render viewport to the scene

            const lookOffset = 300

            Render.lookAt(render, {
                min: { x: 0-lookOffset, y: 0-lookOffset },
                max: { x: width+lookOffset, y: height+lookOffset }
            });

            // context for MatterTools.Demo
            return {
                engine: engine,
                runner: runner,
                render: render,
                canvas: render.canvas,
                stop: function () {
                    Matter.Render.stop(render);
                    Matter.Runner.stop(runner);
                }
            };
        };

        Example.sprites.title = 'Sprites';
        Example.sprites.for = '>=0.14.2';

        Example.sprites()

    </script>




</body>

</html>