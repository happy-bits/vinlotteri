<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script src="lib/matter.min.js"></script>

    <script>
        const Example = {};

        Example.sprites = function () {

            function createBoll(name) {
                const t = wall.thickness/2
                const x = Common.random(boll.radius + t, wall.width - boll.radius - t)
                const y = Common.random(boll.radius + t, wall.height - boll.radius - t)
                return Bodies.circle(x, y, 98 / 2, {
                    density: 0.0005,
                    frictionAir: 0.06,
                    restitution: 0.3,
                    friction: 0.01,
                    render: {
                        sprite: {
                            texture: `./dearfriends/${name}.png`
                        }
                    }
                });
            }

            // De yttre måtten

            const boll = { diameter: 98, radius: 49 }
            const wall = { thickness: 30, width:800, height:1200 }

            // Kortare alias

            const Engine = Matter.Engine,
                Render = Matter.Render,
                Runner = Matter.Runner,
                Composites = Matter.Composites,
                Common = Matter.Common,
                MouseConstraint = Matter.MouseConstraint,
                Mouse = Matter.Mouse,
                Composite = Matter.Composite,
                Bodies = Matter.Bodies;

            // Setup av engine, värld, rendering, runner

            const engine = Engine.create();
            const world = engine.world;

            const render = Render.create({
                element: document.body,
                engine: engine,
                options: {
                    width: wall.width,
                    height: wall.height,
                    showAngleIndicator: false,
                    wireframes: false
                }
            });

            Render.run(render);

            const runner = Runner.create();
            
            // Lägg till fyra fasta vägger till världen
            
            const options = { isStatic: true };
            
            world.bodies = [];
            
            Composite.add(world, [
                
                // centerX, centerY, width, height
                Bodies.rectangle(wall.width / 2, 0, wall.width, wall.thickness, options),
                Bodies.rectangle(wall.width / 2, wall.height, wall.width, wall.thickness, options),
                
                Bodies.rectangle(0, wall.height / 2, wall.thickness, wall.height, options),
                Bodies.rectangle(wall.width, wall.height / 2, wall.thickness, wall.height, options),
            ]);
            
            // Lägg till bollar till världen
            
            for (let i = 0; i < 50; i++) {
                
                const x1 = createBoll('oscar')
                const x2 = createBoll('nils')
                Composite.add(world, [x1, x2]);
            }
            
            // Låt "viewport" vara något större än scenen
            
            const lookOffset = 100
            
            Render.lookAt(render, {
                min: { x: 0 - lookOffset, y: 0 - lookOffset },
                max: { x: wall.width + lookOffset, y: wall.height + lookOffset }
            });
            
            Runner.run(runner, engine);
        };
        
        Example.sprites()

    </script>




</body>

</html>